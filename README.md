# Dahdit
**DahDit**은 모스 부호로 적힌 `.dit`프로그램을 읽어 들여 파싱하고 실행하는 간단한 인터프리터입니다.

Dahdit은 `모스 부호`로 만들어진 `난해한(Esoteric) 프로그래밍 언어`로 단순한 기능 구현을 넘어 C 언어로 바닥부터 구현된 엔진을 통해 언어의 렉서, 파서, 인터프리터 작동 원리를 깊이 있게 탐구한 졸업 작품입니다.

[[엄랭 - rycont / umjunsik-lang](https://github.com/rycont/umjunsik-lang)] 프로젝트에서 영감을 받아 모스 부호라는 독특한 제약을 기반으로 프로그래밍을 색다르게 표현하는 시도를 담았습니다.

- [국제 표준 모스부호 문법 바로가기]()
- [모스부호 온라인 변환기 바로가기](https://blendertimer.com/web-tools/morse-code-translator)

<br/>

## 빌드 및 실행
DahDit은 C11 표준을 사용하며, GCC/Clang에서는 기본적으로 `-Wall -Wextra -Wpedantic` 경고 플래그가 활성화됩니다.

### 빌드
1. CMake로 빌드 디렉터리를 생성합니다: `cmake -S . -B build`
2. 실행 파일을 컴파일합니다: `cmake --build build`

### 실행
빌드 후에는 인터프리터 실행 파일 `dahdit`에 `.dit`파일 경로를 인자로 전달하여 실행합니다.

참고: 인자를 주지 않으면 usage: <프로그램> <file.dit> 메시지를 표시하고 종료합니다.
```bash
./build/dahdit tests/hello_world.dit
```

<br/>

## 문법 및 사용 예시
`Dahdit`파일은 `.dit`확장자를 가지며, 모든 키워드와 연산자는 모스 부호로 치환되어야 합니다.

### 모스 부호 입력 규칙
모스 부호 시퀀스(`.-`, `-...`)를 입력할 때는 다음 규칙을 따릅니다.
1. 토큰 구분자 (/): 키워드, 변수, 숫자, 연산자 등 하나의 의미를 가지는 토큰 사이에는 `슬래시 (/)`를 사용하여 구분합니다. (Ex. VAR / A / = / 10)
2. 공백 처리: 일반적인 띄어쓰기(Whitespace) 대신 `슬래시(/)`가 사용되어 토큰의 경계를 명확히 합니다.

### 키워드 및 연산자 모스 부호
`Dahdit`은 정수형 변수 선언(`VAR`), 할당(`=`), 그리고 모든 사칙연산(`+, -, *, %`)을 지원합니다. 파서는 `연산자 우선순위(*, %이 +, -보다 높음)`를 정확히 처리합니다.

| 키워드 | 모스 부호            | 연산자 | 모스 부호 | 기능           |
|--------|-----------------------|--------|-----------|----------------|
| VAR    | ...- .- .-.           | =      | -...-     | 변수 할당      |
| PRINT  | .--. .-. .. -. -      | +      | .-.-.     | 덧셈           |
|        |                       | -      | -....-    | 뺄셈           |
|        |                       | *      | -.-       | 곱셈           |
|        |                       | /      | -..-.     | 나눗셈         |
|        |                       | %      | ...-.-    | 나머지 연산    |

#### PRINT 구문: 문자열 출력 및 표현식 계산
DahDit의 PRINT는 입력된 토큰의 형태에 따라 문자열 출력과 정수 표현식 계산 결과를 모두 지원합니다.

| 모드                | 문법 예시 (모스 부호)                                   | 출력 내용              | 특징 |
|---------------------|----------------------------------------------------------|-------------------------|-------|
| 계산 모드           | `.--. .-. .. -. - / .- .-.-. -... ;`                    | A + B의 정수 값        | PRINT 뒤의 토큰이 오직 **표현식**일 경우 평가 후 출력 |
| 문자열 모드 (토큰)  | `.--. .-. .. -. - / -.-. / -...- / .- .-.-. -... ;`      | C = A + B (텍스트 그대로) | PRINT 뒤의 토큰들을 세미콜론까지 **문자열로 재구성**하여 그대로 출력 |
| 문자열 모드 (따옴표) | `.--. .-. .. -. - / "HELLO" ;`                           | HELLO (텍스트 그대로)   | 큰따옴표를 사용하여 일반 UTF-8 문자열을 그대로 출력 |

#### print_twice.dit 예제
```dit
# VAR A = 1 ;
...- .- .-. / .- = .---- ;
# VAR B = 2 ;
...- .- .-. / -... = ..--- ;
# VAR C = A + B ;
...- .- .-. / -.-. = .- .-.-. -... ;

# PRINT C = A + B ; (should render as native string)
.--. .-. .. -. - / -.-. = .- .-.-. -... ;

# PRINT C = A + B ; (should render as raw token string)
.--. .-. .. -. - / -.-. / -...- / .- .-.-. -... ;

# PRINT C + B - A ; (numeric result 4)
.--. .-. .. -. - / -.-. .-.-. -... -....- .- ;
```

### 문자열 출력(자연어 / 모스부호)
Dahdit은 문자열 출력을 두 가지 방식으로 지원합니다.

| 방식 | 문법 | 특징 |
|------|------|--------|
| 모스 부호 | `PRINT H E L L O ;` | 연속된 모스 부호 디코딩 문자(TK_LETTER)를 연결하여 출력합니다. |
| 자연어 (편의) | `PRINT "Hello" ;` | 일반적인 언어처럼 따옴표를 사용하여 문자열을 출력합니다. |


```dit
# PRINT HELLO WORLD ; (모스 부호 직접 입력)
.--. .-. .. -. - / .... . .-.. .-.. --- / .-- --- .-. .-.. -.. ;
# 출력: HELLO WORLD

# PRINT "HELLO WORLD" ; (자연어 입력)
.--. .-. .. -. - / "HELLO WORLD" ;
# 출력: HELLO WORLD
```

## License
이 프로젝트는 **MIT License**를 따릅니다. 자세한 내용은 [`LICENSE`](LICENSE) 파일을 참조하십시오.
